<html>
  <head>
    <title>Player Dashboard</title>
    <meta charset="utf-8" />
    <%= csrf_meta_tag() %>
  </head>
  <body>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>X</th>
          <th>Y</th>
          <th>Z</th>
          <th>Last Updated</th>
        </tr>
      </thead>
      <tbody>
        <%= for {id, {x, y, z, ts}} <- @players do %>
          <tr>
            <td><%= id %></td>
            <td><%= x %></td>
            <td><%= y %></td>
            <td><%= z %></td>
            <td><%= ts %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <script type="text/javascript" src="/js/phoenix.min.js"></script>
    <script type="text/javascript" src="/js/phoenix_live_view.min.js"></script>
    <script>
      const csrfToken = document
        .querySelector("meta[name='csrf-token']")
        .getAttribute("content");
      const liveSocket = new LiveView.LiveSocket("/live", Phoenix.Socket, {
        params: { _csrf_token: csrfToken }
      });
      liveSocket.connect();
    </script>
  </body>
</html>
